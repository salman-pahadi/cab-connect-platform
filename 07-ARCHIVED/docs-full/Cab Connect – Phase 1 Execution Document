Below is a **single, comprehensive Phase 1 execution document** you can use to **start work immediately**, align everyone (you, client, Cursor, future devs), and avoid rework or disputes.

This is written as a **delivery-grade internal document**, not theory.
You can treat this as the **Phase 1 Bible**.

---

# üöï Cab Connect ‚Äì Phase 1 Execution Document

**(MVP Development ‚Äì Authoritative Guide)**

---

## 1. Purpose of This Document

This document defines **exactly what Phase 1 is**, how it will be built, and how work must start and progress.

Goals:

* Prevent scope creep
* Maintain architectural discipline
* Ensure Cursor-generated code stays aligned
* Enable smooth Phase 2 expansion
* Protect delivery timeline and quality

This document overrides:

* casual WhatsApp requests
* verbal suggestions
* assumptions based on ‚ÄúUber has this‚Äù

If a feature is not listed here, **it is NOT Phase 1**.

---

## 2. Phase 1 Objective (Very Clear)

**Build a stable, working, cash-based cab booking system for Fiji that supports:**

* passenger booking
* driver acceptance
* ride completion
* basic admin control

Phase 1 is about **reliability**, not growth or optimisation.

---

## 3. Phase 1 In-Scope Platforms

### Included

* Android Passenger App
* Android Driver App
* Backend APIs
* Minimal Web Admin (internal use)

### Explicitly Excluded

* iOS app
* Full web passenger app
* Public admin dashboards
* Marketing website beyond basic landing (if already planned separately)

---

## 4. Brand & Identity (Locked)

* **Brand name:** Cab Connect
* **Legal company name:** Cab Connect
* **Domain:** fijicabconnect.com
* **Logo:** Text-based ‚ÄúCab Connect‚Äù
* **User-facing name everywhere:** Cab Connect

‚ÄúFiji‚Äù is used **only as regional context**, never as brand.

---

## 5. Technology Stack (Locked)

### Backend

* Language: Python
* Framework: FastAPI
* API style: REST
* Real-time updates: Polling (no WebSockets)

### Database

* PostgreSQL (AWS RDS)

### Hosting

* AWS

  * EC2 (backend)
  * RDS (database)
  * S3 (file storage)

### Authentication

* Phone number + SMS OTP
* JWT tokens
* Server-side enforcement

### Development Method

* Code generated via **Cursor**
* Developer acts as **architect and reviewer**
* No monolithic ‚Äúbuild everything‚Äù prompts

---

## 6. Core Functional Decisions (Non-Negotiable)

### Ride Assignment

* Broadcast ride request to nearby drivers
* First driver to accept gets the ride
* Backend enforces atomic assignment

### Ride Lifecycle (Strict)

```
REQUESTED
‚Üí DRIVER_ASSIGNED
‚Üí DRIVER_ARRIVED
‚Üí TRIP_STARTED
‚Üí TRIP_COMPLETED
or
‚Üí CANCELLED
```

No skipping states. No custom states.

---

### Ride Completion

* Driver marks ride as completed
* Cash assumed collected
* Backend calculates and stores final fare

---

### Cancellation Rules

* Passenger can cancel **until driver arrives**
* Cancellation blocked after `DRIVER_ARRIVED`
* Backend enforces rules (UI alone is not trusted)

---

### Payments

* Cash only
* No wallet
* No card payments
* No refunds logic

---

### Ratings & Reviews

* ‚ùå Not included in Phase 1

---

### Scheduled Rides

* ‚ùå Not included in Phase 1

---

## 7. Support & Issue Handling

### In-App Support (Minimal)

* ‚ÄúReport an Issue‚Äù button
* Text-only form
* Linked to ride ID

### Admin Handling

* Issues viewed in admin panel
* Resolution happens manually (call / WhatsApp)

No ticket statuses, no in-app replies.

---

## 8. Admin Panel (Phase 1 Scope)

### Admin Capabilities

* Login (admin only)
* View all rides (live & completed)
* View drivers

  * Pending
  * Approved
  * Blocked
* Approve / block drivers
* View support issues

### Admin Exclusions

* No analytics dashboards
* No payouts
* No commission management
* No automated actions

---

## 9. Driver Onboarding Rules

* Driver registers via phone OTP
* Uploads basic details (name, vehicle, licence)
* Status = **Pending**
* Admin manually approves
* Only approved drivers can go online

No auto-approval.

---

## 10. Database Design Rules (Very Important)

### Phase 1 Core Tables

Must include (minimum):

* users
* drivers
* driver_documents
* rides
* driver_locations (latest only)
* pricing_rules
* otp_logs
* support_issues
* admin_users

### Strict Rules

* One source of truth for ride status
* One driver per ride
* Store pricing snapshot per ride
* Do NOT store full GPS history yet

Schema must support Phase 2 **without breaking changes**.

---

## 11. API Design Principles

* Stateless APIs
* JWT required for protected endpoints
* Server-side validation for:

  * ride state transitions
  * cancellations
  * completions
* Rate limiting for:

  * OTP requests
  * location updates

No business logic in the client apps.

---

## 12. Real-Time Updates (Phase 1 Method)

### Polling Strategy

* Passenger polls ride status every 3‚Äì5 seconds
* Driver sends location updates every:

  * 3‚Äì5 seconds during trip
  * 10‚Äì15 seconds when idle

No WebSockets in Phase 1.

---

## 13. Development Order (Do NOT Change)

### Step 1 ‚Äì Documentation

* Create `PHASE1_DECISIONS.md`
* Create `BRAND_GUIDELINES.md`

### Step 2 ‚Äì Project Skeleton

* Backend folder structure
* Docker & env placeholders

### Step 3 ‚Äì Database Schema

* Design schema first
* Review manually
* Lock schema before coding

### Step 4 ‚Äì API Contracts

* Define endpoints & request/response shapes

### Step 5 ‚Äì Feature Implementation (One by One)

1. OTP auth
2. Driver approval
3. Driver online/offline
4. Ride request
5. Ride accept
6. Ride lifecycle updates
7. Fare calculation
8. Ride completion
9. Issue reporting
10. Admin views

No skipping. No parallel feature mixing.

---

## 14. Cursor Usage Rules (Critical)

### Allowed

* Generate one module at a time
* Ask for models separately from logic
* Ask for APIs separately from DB
* Review logic before accepting code

### Not Allowed

* ‚ÄúBuild full backend‚Äù
* ‚ÄúAdd payments now‚Äù
* ‚ÄúAdd ratings for later‚Äù
* Mixing Phase 2 features

Cursor executes. You decide.

---

## 15. Account & Ownership Rules

### Project Email

* `fijicabconnect@gmail.com`
* Temporary recovery details allowed
* Must be transferred before final delivery

### Cloud & Accounts

* AWS, Google Cloud, Firebase created using project email
* No personal accounts mixed
* Ownership handover planned

---

## 16. Phase 1 Completion Criteria

Phase 1 is considered **complete only when**:

* Passenger can book a ride
* Driver can accept and complete ride
* Fare is calculated and stored
* Admin can approve drivers
* Support issues can be logged
* System runs stably on AWS

UI polish is secondary to correctness.

---

## 17. What Phase 1 Is NOT

* Not Uber
* Not feature-complete
* Not payment-enabled
* Not growth-optimised

It is a **reliable foundation**.

---

## 18. Authority Statement

If a request conflicts with this document:

* This document wins
* Feature goes to Phase 2
* Timeline and cost are protected

---

## 19. Next Immediate Action (You)

**Right now, do this:**

1. Create `PHASE1_EXECUTION.md` using this document
2. Create backend skeleton
3. Start **database schema design in Cursor**

